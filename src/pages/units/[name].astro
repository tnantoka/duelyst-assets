---
import Layout from '../../layouts/Layout.astro';
import Thumbnail from '../../components/Thumbnail.astro';
import Frame from '../../components/Frame.astro';
import Resources from '../../scripts/resources';
import { parseFrame } from '../../scripts/frames';

const { name } = Astro.params;

const image = Resources.unit.images[name];
const plist = Resources.unit.plists[name];

export const getStaticPaths = async () => {
  return Resources.unit.names.map((name) => ({ params: { name } }));
};
---

<Layout title={name}>
  <main>
    <Thumbnail name={name} />
    <p class="bg-light">
      <img src={image} class="img-fluid">
    </p>
    <table class="table">
      <tbody>
        {Object.entries(plist.frames).map(([frameName, frame]) => (
          <tr>
            <th class="align-middle">{frameName}</th>
            <td class="align-middle">
              <pre class="mb-0"><code>{Object.entries(parseFrame(frame.frame)).map(([k, v]) => `${k}: ${v}`).join('\n')}</code></pre>
            </td>
            <td class="align-middle"><Frame name={name} frameName={frameName} /></td>
          </tr>
        ))}
      </tbody>
    </table>
  </main>
</Layout>
